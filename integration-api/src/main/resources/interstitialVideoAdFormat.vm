<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/>
    <style type="text/css">
        body {margin: 0; overflow: hidden;}
    </style>
</head>
<body>
<script type="text/javascript" src="${IMAIBaseUrl}"> </script>
<div style="display:none; position:absolute;" id="${first.ns}clickTarget"></div>
<script type="text/javascript">
    window['${first.ns}clickCallback'] = function() {
        _im_imai.onUserInteraction();
        _im_imai.pingInWebView('${first.clickServerUrl}');
    };
	window['${first.ns}impressionCallback'] = function() {
        _im_imai.pingInWebView('${IMWinUrl}');
        #if($PartnerBeaconUrl)_im_imai.pingInWebView('${PartnerBeaconUrl}');#end
    };
    window['${first.ns}LandingPageEvent'] = function() {
    };
    window['${first.ns}recordEvent'] = function(id, params) {
        var firePixel = function(source, retryTime, times) {
            if (times <= 0) {
                return;
            }
            var clickTarget = document.getElementById('${first.ns}clickTarget');
            var img = document.createElement('img');
            img.setAttribute('src', source);
            img.setAttribute('height', '0');
            img.setAttribute('width', '2');
            if (img['addEventListener'] != undefined) {
                img.addEventListener('error', function() {
                    window.setTimeout(function() {
                        if (retryTime > 300000) {
                            retryTime = 300000;
                        }
                        firePixel(source, retryTime * 2, times - 1);
                    }, retryTime + Math.random());
                }, false);
            }
            clickTarget.appendChild(img);
        };
        var beacon = "${first.beaconUrl}";
        beacon += "?m=" + id;
        if (params) {
            for (var key in params) {
                beacon += "&" + encodeURIComponent(key) + "=" + encodeURIComponent(params[key]);
            }
        }
        firePixel(beacon, 1000, 5);
        if (id == 18) {
            window['${first.ns}impressionCallback']();
        }
        if (id == 8) {
            window['${first.ns}clickCallback'](event);
        }
    };
#if(${SDK450Onwards})
    window['${first.ns}fireAdReady'] = function() {
       _im_imai.fireAdReady();
    };
    window['${first.ns}fireAdFailed'] = function() {
       _im_imai.fireAdFailed();
    };
    window['${first.ns}fireAutoAdReady'] = true;

    window['${first.ns}disableAutoFireAdReady'] = function() {
        window['${first.ns}fireAutoAdReady'] = false;
    };
    var readyHandler = function(val) {
       if (window['${first.ns}fireAutoAdReady']) {
          window['${first.ns}fireAdReady']();
       }
    };
    _im_imai.addEventListener('ready', readyHandler);
#end
</script>
### START: Sprout template for VAST ##
<div id="${first.ns}sproutAd"></div><script>var _Sprout=_Sprout||{};_Sprout.impressionTracker="PUT_IMPRESSION_TRACKER_HERE",_Sprout.clickTracker="PUT_CLICK_TRACKER_HERE",_Sprout.publisherLabel="PUT_PUBLISHER_LABEL_HERE",_Sprout.xvars={fallbackImgUrl:"http://adtools-a.akamaihd.net/c/uznREOBZcMxoLt6cu/o.jpg",video_muted:"true"},function(){function a(a){return document.getElementById(a)}function b(a){for(var b,c,d=0;d<w.length;d++)b=w[d].replace(x,a),c=new Image,c.src=b;s(99,{action:"vast_error_"+a})}function c(a,b){var d,e="",g=new XMLHttpRequest;try{g.open("GET",a,!1),g.send(),200===g.status?""==g.responseText||null===g.responseText?b?s(99,{action:"cors_empty_response"}):s(99,{action:"studioProxy_empty_response"}):(e=g.responseText,b?s(99,{action:"cors_success"}):s(99,{action:"studioProxy_success"})):s(99,{action:"network_error_"+g.status})}catch(h){if(b)return s(99,{action:"cors_failure"}),d=a.replace(/^https?:\/\//,""),d=y+encodeURIComponent(d),d=f(d),e=c(d,!1);s(99,{action:"studioProxy_failure"}),0==g.status&&s(99,{action:"network_error_"+g.status})}return e}function d(a,b){var c;b>=0&&1>=b?c="0_1":b>1&&2>=b?c="1_2":b>2&&3>=b?c="2_3":b>3&&5>=b?c="3_5":b>5&&10>=b?c="5_10":b>10&&20>=b?c="10_20":b>20&&60>=b?c="20_60":b>60&&(c="60p"),s(99,{action:a+"_"+c})}function e(a){var b;return a>=0&&100>a?b="0000-0100":a>=100&&500>a?b="0100-0500":a>=500&&1e3>a?b="0500-1000":a>=1e3&&1500>a?b="1000-1500":a>=1500&&2e3>a?b="1500-2000":a>2e3&&(b="2000p"),b}function f(a){return a.replace(/(\r\n|\n|\r)/gm,"").replace(/^ */,"").replace(/ *$/,"")}function g(a){var b,c,d,e=a.getElementsByTagName("Tracking")||[],g=a.getElementsByTagName("ClickTracking")||[],h=a.getElementsByTagName("Impression")||[];for(d=0;d<e.length;d++)b=e[d].getAttribute("event")||"",c=f(e[d].textContent)||"",b&&c&&(v[b]?v[b].push("'"+c+"'"):v[b]=["'"+c+"'"]);for(d=0;d<g.length;d++){var i=f(g[d].textContent);""!=i&&null!=i&&(v.clickTracking?v.clickTracking.push("'"+i+"'"):v.clickTracking=["'"+i+"'"])}for(d=0;d<h.length;d++){var j=f(h[d].textContent);""!=j&&null!=j&&(v.start?v.start.push("'"+j+"'"):v.start=["'"+j+"'"])}}function h(a){var b,e,h,i,j,k,l,m=0,n={success:!1,errorCode:0,xml:""};for(j=a.url?c(a.url,!0):a.xml;u>m;){if(l&&(j=c(l,!0)),!j){n.errorCode=900;break}if(b=(new DOMParser).parseFromString(j,"text/xml"),k=b.getElementsByTagName("parsererror"),k.length>0){n.errorCode=100;break}if(e=b.getElementsByTagName("Error"),e.length>0)for(var o=0;o<e.length;o++){var p=f(e[o].textContent);""!=p&&null!=p&&w.push(p)}if(g(b),h=b.getElementsByTagName("VASTAdTagURI"),!(h.length>0)){i=b.getElementsByTagName("InLine"),i.length>0?(n.success=!0,n.xml=b):n.errorCode=303;break}l=f(h[0].textContent),m++}return m!==u||n.success||(n.errorCode=302),d("wrapper_redirects",m),n}function i(a){for(var c,d,g,h,i,j,k,l=[],m=0;m<a.length;m++)c=a[m],d=c.getAttribute("delivery"),g=c.getAttribute("bitrate"),h=c.getAttribute("width")||0,i=c.getAttribute("height")||0,j=c.getAttribute("type"),"progressive"===d&&"video/mp4"===j?k?Math.abs(1024-g)<Math.abs(1024-k.getAttribute("bitrate"))&&(k=c):k=c:"video/mp4"!=j&&-1===l.indexOf(j)&&l.push(j);if(k){{document.getElementById("Sprout_"+H)}return h=k.getAttribute("width"),i=k.getAttribute("height"),g=k.getAttribute("bitrate"),s(99,{action:"video_"+e(g)+"_"+h+"x"+i}),f(k.textContent)}for(var m=0;m<l.length;m++)s(99,{action:"invalid_format_"+l[m]});return b(403),""}function j(){var a,c,e,g="$VASTContentJSEsc",j=/^https?.*/;if(p=(new Date).getTime(),c=h(j.test(g)?{url:g}:{xml:g}),q=(new Date).getTime(),d("unwrap_time",(q-p)/1e3),e=c.xml,!c.success)return b(c.errorCode),void(_Sprout.xvars.video_url="");var k=e.getElementsByTagName("MediaFile");if(a=i(k),_Sprout.xvars.video_url=a,""!==a){var l=e.getElementsByTagName("ClickThrough");v.clickThrough=f(l[0].textContent),_Sprout.xvars.tobeSkipped=z.video&&z.video.skippable?1:0,_Sprout.xvars.play="["+v.start+"]"||"",_Sprout.xvars.q1="["+v.firstQuartile+"]"||"",_Sprout.xvars.q2="["+v.midpoint+"]"||"",_Sprout.xvars.q3="["+v.thirdQuartile+"]"||"",_Sprout.xvars.complete="["+v.complete+"]"||"",_Sprout.xvars.muted="["+v.mute+"]"||"",_Sprout.xvars.unmuted="["+v.unmute+"]"||"",_Sprout.xvars.paused="["+v.pause+"]"||"",_Sprout.xvars.resume="["+v.resume+"]"||"",_Sprout.xvars.skip="["+v.skip+"]"||"",_Sprout.xvars.ctaClick="["+v.clickTracking+"]"||"",_Sprout.xvars.download=v.clickThrough||"",_Sprout.xvars.video_muted=z.video?!z.video.soundOn+"":"true"}}function k(){var a=E.match(/Android\s+([\d\.]+)/i);return a?a[1]:!1}function l(){var a,b=parseFloat(k()),c=${ad.requestJson},d=c?c.networkType:"",e=z.video?z.video.preBuffer:"DISABLE";("ALWAYS"==e||"WIFI"==e&&"WIFI"==d)&&"function"==typeof imraid.saveContent&&("ios"===F||"android"===F&&G>=450)&&(I=!0),I?"android"===F?(a="Android_InstantPlay",4.4==b&&(_im_imai=_im_imai||{},_im_imai.getSdkVersion=function(){return"4.1.0"})):a="iOS_InstantPlay":a="android"===F?"Android_Regular":"iOS_Regular",_Sprout.publisherLabel=a}function m(){var b=a(t+"sproutAd"),c='<div id="Sprout_'+H+'_div" data-creativeId="'+H+'"></div>',d=document.createElement("div");d.innerHTML=c,b.appendChild(d.firstChild)}function n(){var a=C/D;switch(a){case 320/480:H=A[0],_Sprout.xvars.fallbackImgUrl=B[0];break;case 1.5:H=A[1],_Sprout.xvars.fallbackImgUrl=B[1]}}function o(){J(),G>=450&&imraid&&"function"==typeof imraid.disableCloseRegion&&imraid.disableCloseRegion(!0)}var p,q,r=window.${first.ns}recordEvent,s=function(a,b){var c={spid:H||"",src:"sprout"};if(99===a)for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);r&&"function"==typeof r&&r(a,c)},r=window["${first.ns}recordEvent"],t="${first.ns}",u=6,v={},w=[],x="ERRORCODE",y="http://feedproxy.sproutbuilder.com/f/",z=${ad.sitePreferencesJson},A=["IsyFZHxbbRaN0dBV","f0GmNCK5Tf9N0Kd8"],B=["http://adtools-a.akamaihd.net/c/uznREOBZcMxoLt6cu/o.jpg","http://adtools-a.akamaihd.net/c/K441RFiyOC7cpvrFv/o.jpg"],C=$ad.supplyWidth,D=$ad.supplyHeight,E=navigator.userAgent,F=E.match(/iPhone|iPad|iPod/i)?"ios":E.match(/Android/i)?"android":"",G="3.7.0",H=A[0],I=!1,J=function(){imraid&&"function"==typeof imraid.getSdkVersion&&void 0!=imraid.getSdkVersion()?G=imraid.getSdkVersion():mraid&&"function"==typeof mraid.getSdkVersion&&void 0!=mraid.getSdkVersion()&&(G=mraid.getSdkVersion()),G=+G.split(".").join("")};"undefined"!=typeof window.mraid&&(mraid=window.mraid,mraid.addEventListener("ready",o,!1)),n(),m(),J(),l(),j();var K=window.${first.ns}disableAutoFireAdReady,L=window.${first.ns}fireAdReady;K&&K();var M=function(a){var b;return a>=0&&1>=a?b="0_1":a>1&&2>=a?b="1_2":a>2&&3>=a?b="2_3":a>3&&5>=a?b="3_5":a>5&&10>=a?b="5_10":a>10&&20>=a?b="10_20":a>20&&60>=a?b="20_60":a>60&&(b="60p"),b},N=function(){var a,b,c,d;_Sprout._inMobiAdTagTracking={st:(new Date).getTime(),rr:0},_Sprout[H]={querystring:{__im_curl:"${first.beaconUrl}",__im_sdk:"${ad.sdkVersion}",click:"${first.clickServerUrl}",adFormat:"interstitial",__im_recordEventFun:"${first.ns}recordEvent",openLandingPage:"${first.ns}LandingPageEvent"}};var a=document.createEvent("Event");a.initEvent("sproutReady",!0,!0),window.dispatchEvent(a);var b,c="/load/"+H+".inmobi.html.js",d=function(){var a=document.getElementsByTagName("script"),a=a[a.length-1],d=document.createElement("script");d.async=!0,d.type="text/javascript",b="https:"==document.location.protocol?"https://inmobistudio-a.akamaihd.net":"http://edgy.sproutbuilder.com",d.src=b+c,a.parentNode.insertBefore(d,a.nextSibling)};"0"===window._Sprout[H].querystring.__im_sdk||"complete"===document.readyState?d():window.addEventListener("load",d,!1),L&&L()};mraid.addEventListener("ready",function(){if(I&&_Sprout.xvars.video_url){var a,b,c,d="";a=(new Date).getTime(),imraid.saveContent("preload"+(new Date).getTime(),_Sprout.xvars.video_url,function(e,f){b=(new Date).getTime(),c=parseFloat((b-a)/1e3),d=M(c),s(99,{action:"cache_time_"+d}),"success"==e?_Sprout.xvars.video_url=f.saved_url:s(99,{action:"cache_error_"+f.reason}),N()})}else N()})}();</script>
### END: Sprout template for VAST ##
</body>
</html>
